# Contexto del Proyecto

## Stack tecnologico
- Node.js >= 18 + Express 4 (backend API REST)
- HTML/CSS/JS vanilla (frontend, sin framework)
- gray-matter (parser frontmatter .md)
- commander.js (CLI)
- simple-git (integracion git)
- @anthropic-ai/sdk con claude-sonnet-4-6 (motor IA)
- chokidar (file watcher para cambios en kanban/)
- ws (WebSocket server para notificaciones push)
- redis (cache opcional)
- SSE como fallback de WebSocket

## Decisiones de arquitectura
- Las tareas son archivos .md con frontmatter YAML en /kanban/{column}/
- Mover tarea = mover archivo fisicamente entre carpetas (backlog, todo, in_progress, review, done)
- IDs secuenciales padded a 3 digitos (001, 002...)
- Puerto del servidor UI: 3847 (configurable via kanban.config.js o env PORT)
- Transporte primario: WebSocket en /ws, fallback: SSE en /api/events
- NotificationManager centraliza push notifications y broadcast de cambios del board
- El loop de IA (loop.js) corre como proceso separado, comunicacion via archivos PID y polling
- Cada tarea IA crea su propia branch git desde main

## Features implementadas
- **Tablero Kanban visual** - 5 columnas con drag & drop, filtros por tipo/label, badges
- **CLI completo** - create, list, move, show, delete, start, board
- **Motor IA multi-fase** - Ciclo PLAN -> CODE -> REVIEW -> TEST con reintentos
- **Gestion de proyectos** - Multiples proyectos con selector, cada uno con su kanban/
- **Historial de ejecucion** - Artefactos por fase (.md y .log), diff de branch
- **Metricas** - Total tareas, completadas, tiempo promedio, iteraciones promedio
- **Bug fix isEmptyPlaceholder** (tarea #008) - Null-check en funcion isEmptyPlaceholder (app.js:1373) para manejar contenido null/undefined en generacion de descripcion de tareas
- **Sistema de notificaciones push con WebSocket** (tarea #004):
  - NotificationManager con historial en memoria (max 200), tipos, prioridades, mark-read
  - WebSocketServer sobre http.Server existente en /ws
  - Endpoints REST: GET /api/notifications, PUT /api/notifications/read
  - Cliente WS con fallback a SSE y backoff exponencial (1s -> 30s)
  - Notification Center UI: dropdown con historial, badge de no-leidas, mark-all-read
  - Notificaciones OS (browser Notification API) para eventos de alta prioridad
  - 17 tests unitarios del NotificationManager

## Convenciones del proyecto
- Sin framework frontend (vanilla JS, HTML, CSS)
- Estilos dark theme con variables CSS (--bg, --text, --accent, etc.)
- Funciones globales en app.js (no modulos ES)
- Tests con assert nativo de Node.js, sin test runner externo
- Archivos de configuracion: kanban.config.js en raiz del proyecto
- Comunicacion servidor -> cliente: JSON con formato { event, data } para WS, { type, ... } para SSE
